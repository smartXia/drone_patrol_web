import{_ as tt,L as st,H as at,M as lt,N as nt,r as $,m as ot,x as it,G as V,O as dt,b as O,o as I,c as L,f as l,w as n,e as t,u as S,P as rt,g as x,t as o,s as G,i as ut,Q as ne,R as ct,S as se,U as _t,V as ae,p as pt,C as vt,F as ft,h as mt,q as gt,n as yt}from"./index-4fc56381.js";const bt={class:"aircraft-detail"},ht={class:"header-left"},wt={class:"header-right"},xt={key:0,class:"data-update-info"},kt={key:0,class:"connection-warning"},Mt={key:1,class:"loading-state"},Tt={key:2,class:"data-container"},St={style:{"margin-bottom":"15px"}},zt={style:{color:"var(--el-text-color-primary)","font-weight":"500"}},Dt={style:{"font-size":"10px",color:"#999","margin-top":"2px"}},Ct={class:"card-header"},Ft={class:"info-content"},Ot={class:"info-item"},jt={class:"value"},Nt={class:"info-item"},$t={class:"value"},Bt={class:"info-item"},Vt={class:"value"},It={class:"info-item"},Pt={class:"value"},Rt={class:"info-item"},Lt={class:"card-header"},At={class:"info-content"},Et={class:"info-item"},Ut={class:"value"},Qt={class:"info-item"},Jt={class:"value"},qt={class:"info-item"},Gt={class:"value"},Ht={class:"info-item"},Kt={class:"value"},Wt={class:"info-item"},Xt={class:"card-header"},Yt={class:"info-content"},Zt={class:"info-item"},es={class:"value"},ts={class:"info-item"},ss={class:"value"},as={class:"info-item"},ls={class:"value"},ns={class:"info-item"},os={class:"value"},is={class:"card-header"},ds={class:"info-content"},rs={class:"info-item"},us={class:"info-item"},cs={style:{display:"flex","align-items":"center",gap:"8px"}},_s={class:"info-item"},ps={class:"value"},vs={class:"info-item"},fs={class:"card-header"},ms={class:"info-content"},gs={class:"info-item"},ys={class:"info-item"},bs={class:"info-item"},hs={class:"info-item"},ws={class:"info-item"},xs={class:"card-header"},ks={class:"info-content"},Ms={class:"info-item"},Ts={class:"value"},Ss={class:"info-item"},zs={class:"value"},Ds={class:"info-item"},Cs={class:"card-header"},Fs={class:"info-content"},Os={class:"info-item"},js={class:"value"},Ns={class:"info-item"},$s={class:"value"},Bs={class:"info-item"},Vs={class:"info-item"},Is={class:"card-header"},Ps={class:"info-content"},Rs={class:"info-item"},Ls={class:"info-item"},As={class:"info-item"},Es={class:"value"},Us={class:"info-item"},Qs={class:"value"},Js={class:"card-header"},qs={class:"info-content"},Gs={class:"info-item"},Hs={class:"value"},Ks={class:"info-item"},Ws={class:"value"},Xs={class:"info-item"},Ys={class:"value"},Zs={class:"info-item"},ea={class:"value"},ta={class:"info-item"},sa={class:"card-header"},aa={class:"info-content"},la={class:"info-item"},na={class:"value"},oa={class:"info-item"},ia={class:"value"},da={class:"info-item"},ra={class:"value"},ua={class:"info-item"},ca={class:"info-item"},_a={class:"info-item"},pa={class:"card-header"},va={class:"info-content"},fa={class:"info-item"},ma={class:"value"},ga={class:"info-item"},ya={class:"value"},ba={class:"info-item"},ha={class:"value"},wa={class:"info-item"},xa={class:"value"},ka={class:"card-header"},Ma={class:"info-content"},Ta={class:"info-item"},Sa={class:"value"},za={class:"info-item"},Da={class:"value"},Ca={class:"info-item"},Fa={class:"card-header"},Oa={class:"info-content"},ja={class:"info-item"},Na={class:"info-item"},$a={class:"info-item"},Ba={class:"value"},Va={class:"card-header"},Ia={class:"info-content"},Pa={class:"info-item"},Ra={class:"info-item"},La={class:"value"},Aa={class:"info-item"},Ea={key:0,style:{"margin-top":"8px"}},Ua={class:"info-item"},Qa={class:"label"},Ja={class:"info-item"},qa={class:"value"},Ga={class:"info-item"},Ha={class:"value"},Ka={class:"card-header"},Wa={class:"info-content"},Xa={class:"info-item"},Ya={class:"info-item"},Za={class:"info-item"},el={class:"info-item"},tl={class:"info-item"},sl={class:"info-item"},al={class:"card-header"},ll={class:"json-viewer"},nl=["innerHTML"],ol=3,il={__name:"AircraftDetail",setup(dl){const ye=st(),be=at(),P=lt(),oe=nt(),A=$(""),a=$(null),B=$(!1),H=$(!1),U=$(null),Q=$(null),K=$(null);$(0);const E=$(null),J=$(null),W=$(0),X=ot(()=>`thing/product/${A.value}/osd`);it(()=>{A.value=ye.params.deviceSn||"",A.value?(re(),ee(),Se()):(V.error("未找到设备SN参数"),ie())}),dt(()=>{we(),ze(),K.value&&clearTimeout(K.value),X.value&&P.unsubscribeTopics(X.value)});const ee=async()=>{if(!P.isConnected){V.warning("MQTT未连接，无法订阅OSD数据");return}try{await P.subscribeToTopics(X.value,1),V.success(`已订阅OSD主题: ${X.value}`),he()}catch(s){console.error("订阅OSD主题失败:",s),V.error("订阅OSD主题失败")}},he=()=>{U.value&&clearInterval(U.value),U.value=setInterval(()=>{xe()},2e3)},we=()=>{U.value&&(clearInterval(U.value),U.value=null)},xe=()=>{const s=P.messageHistory.filter(e=>e.topic===X.value);if(s.length>0){const e=s[0];if(e.id!==Q.value)try{const M=JSON.parse(e.payload);ke(M)?!a.value||Me(a.value,M)?(K.value&&clearTimeout(K.value),K.value=setTimeout(()=>{a.value?a.value=Te(a.value,M):a.value=M,B.value=!0,Q.value=e.id,E.value=Date.now(),W.value=0,console.log("数据已更新:",new Date().toLocaleTimeString(),"消息ID:",e.id),console.log("数据内容:",M)},200)):(Q.value=e.id,console.log("OSD数据无变化，跳过更新")):(console.warn("收到无效的OSD数据，跳过更新:",M),Q.value=e.id,!a.value&&M&&typeof M=="object"&&(console.log("尝试使用部分有效数据"),a.value=M,B.value=!0,E.value=Date.now()))}catch(M){console.error("解析OSD数据失败:",M,"原始数据:",e.payload),Q.value=e.id}}else a.value&&B.value&&(console.log("暂无新OSD消息，保持现有数据显示"),B.value||(B.value=!0))},ke=s=>{if(!s||typeof s!="object")return!1;if(s.data&&typeof s.data=="object"){const e=s.data,p=["departure_point","sdr","wireless_link","tilt_angle","drc_state"].some(F=>F in e),q=["job_number","acc_time","electric_supply_voltage","backup_battery","drone_battery_maintenance_info"].some(F=>F in e),T=["latitude","longitude","height","drone_charge_state","network_state","temperature"].some(F=>F in e);return p||q||T}return!1},Me=(s,e)=>{var q,Y;if(!s||!e)return!0;const M=s.timestamp||0,p=e.timestamp||0;if(M!==p)return!0;const te=["latitude","longitude","height","drone_charge_state","environment_temperature","network_state","temperature"];for(const T of te){const F=(q=s.data)==null?void 0:q[T],z=(Y=e.data)==null?void 0:Y[T];if(typeof F=="number"&&typeof z=="number"){if(Math.abs(F-z)>.001)return!0}else if(F!==z)return!0}return!1},ie=()=>{be.go(-1)},Te=(s,e)=>{if(!s)return e;if(!e)return s;const M={...s};return Object.keys(e).forEach(p=>{p==="data"&&e.data&&typeof e.data=="object"?M.data={...s.data,...e.data}:M[p]=e[p]}),M},Se=()=>{J.value&&clearInterval(J.value),J.value=setInterval(()=>{const s=Date.now(),e=E.value;e&&s-e>30*1e3&&(console.warn("数据更新超时，尝试重新订阅"),V.warning("数据更新超时，正在尝试重新连接..."),W.value<ol?(W.value++,ee()):(V.error("多次重试失败，请检查网络连接"),W.value=0))},1e4)},ze=()=>{J.value&&(clearInterval(J.value),J.value=null)},de=()=>{console.log("手动刷新数据"),V.info("正在刷新数据..."),B.value=!1,Q.value=null,W.value=0,re(),ee()},re=()=>{try{localStorage.removeItem(`osd_data_${A.value}`),console.log("已清理缓存数据")}catch(s){console.error("清理缓存数据失败:",s)}},De=()=>{if(!E.value)return"info";const e=Date.now()-E.value;return e<1e4?"success":e<3e4?"warning":"danger"},Ce=()=>{if(!E.value)return"无数据";const e=Date.now()-E.value;return e<1e4?"实时":e<3e4?"延迟":"超时"},ue=s=>{if(!s)return"--";const e=["B","KB","MB","GB","TB"];let M=s,p=0;for(;M>=1024&&p<e.length-1;)M/=1024,p++;return`${M.toFixed(2)} ${e[p]}`},ce=s=>!s||!s.total?0:Math.round(s.used/s.total*100),Fe=s=>{const e=ce(s);return e>90?"#f56c6c":e>70?"#e6a23c":"#67c23a"},Oe=s=>s>50?"#67c23a":s>20?"#e6a23c":"#f56c6c",je=s=>({1:"primary",2:"success"})[s]||"info",Ne=s=>({1:"4G",2:"以太网"})[s]||"未知",$e=s=>s>=4?"success":s>=2?"warning":s>=1?"danger":"info",Be=s=>s>=4?"#67c23a":s>=2?"#e6a23c":s>=1?"#f56c6c":"#909399",Ve=()=>{var s,e;return((s=oe.currentDevice)==null?void 0:s.airport_sn)||((e=a.value)==null?void 0:e.gateway)||A.value||"--"},Ie=s=>({0:"无信号",1:"差",2:"较差",3:"一般",4:"较好",5:"好"})[s]||"未知",Pe=s=>s==null?"--":`${s} KB/s`,Re=s=>({0:"danger",1:"warning",2:"success"})[s]||"info",Le=s=>({0:"未定位",1:"单点定位",2:"差分定位"})[s]||"未知",_e=s=>({0:"success",1:"info",2:"info",3:"warning",4:"primary",5:"warning"})[s]||"info",pe=s=>({0:"空闲中",1:"现场调试",2:"远程调试",3:"固件升级中",4:"作业中",5:"待标定"})[s]||"未知",Ae=s=>({0:"左电池",1:"右电池"})[s]||`电池${s+1}`,ve=s=>s==null||s===32767?0:Math.max(0,Math.min(100,s)),Ee=s=>s==null?"--":s===32767?"异常":`${(s/1e3).toFixed(2)}V`,Ue=s=>s==null?"--":s===32767?"异常":`${s.toFixed(1)}°C`,Qe=s=>({0:"success",1:"info",2:"warning",3:"danger"})[s]||"info",Je=s=>({0:"无雨",1:"小雨",2:"中雨",3:"大雨"})[s]||"未知",qe=s=>({0:"info",1:"warning",2:"success"})[s]||"info",Ge=s=>({0:"初始状态",1:"拒绝加入",2:"同意加入"})[s]||"未知",fe=s=>({0:"info",1:"primary",2:"warning",3:"info",4:"info",5:"success",255:"danger",256:"info"})[s]||"info",me=s=>({0:"作业准备中",1:"飞行作业中",2:"作业后状态恢复",3:"自定义飞行区更新中",4:"地形障碍物更新中",5:"任务空闲",255:"飞行器异常",256:"未知状态"})[s]||"未知",He=s=>{try{let e;if(typeof s=="string"){const M=JSON.parse(s);e=JSON.stringify(M,null,2)}else if(typeof s=="object"&&s!==null)e=JSON.stringify(s,null,2);else return String(s);return e.replace(/(".*?")\s*:/g,'<span class="json-key">$1</span>:').replace(/:\s*(".*?")/g,': <span class="json-string">$1</span>').replace(/:\s*(\d+)/g,': <span class="json-number">$1</span>').replace(/:\s*(true|false)/g,': <span class="json-boolean">$1</span>').replace(/:\s*(null)/g,': <span class="json-null">$1</span>').replace(/([{}[\]])/g,'<span class="json-bracket">$1</span>').replace(/(,)/g,'<span class="json-comma">$1</span>')}catch{return String(s)}},Ke=s=>s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",We=s=>{if(!s)return"--";const e=Math.floor(s/(1e3*60*60)),M=Math.floor(s%(1e3*60*60)/(1e3*60));return`${e}小时${M}分钟`},Xe=s=>s?new Date(s*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"--",Ye=async()=>{if(a.value)try{const s=JSON.stringify(a.value,null,2);await navigator.clipboard.writeText(s),H.value=!0,setTimeout(()=>{H.value=!1},2e3),V.success("OSD数据已复制到剪贴板")}catch(s){console.error("复制失败:",s),V.error("复制失败，请手动复制")}};return(s,e)=>{const M=O("el-button"),p=O("el-tag"),te=O("el-header"),q=O("el-alert"),Y=O("el-empty"),T=O("el-col"),F=O("el-row"),z=O("el-icon"),C=O("el-card"),le=O("el-progress"),Ze=O("el-main"),et=O("el-container");return I(),L("div",bt,[l(et,{style:{height:"100vh"}},{default:n(()=>[l(te,{class:"detail-header"},{default:n(()=>[t("div",ht,[l(M,{type:"primary",icon:S(rt),onClick:ie,style:{"margin-right":"16px"}},{default:n(()=>[...e[0]||(e[0]=[x(" 返回 ",-1)])]),_:1},8,["icon"]),t("h2",null,"飞机信息详情 - "+o(A.value),1)]),t("div",wt,[B.value&&a.value?(I(),L("div",xt,[l(p,{type:"info",size:"small",style:{"margin-right":"8px"}},{default:n(()=>[x(" 最后更新: "+o(Ke(a.value.timestamp)),1)]),_:1}),l(p,{type:De(),size:"small",style:{"margin-right":"8px"}},{default:n(()=>[x(o(Ce()),1)]),_:1},8,["type"])])):G("",!0),B.value?(I(),ut(M,{key:1,type:"primary",size:"small",onClick:de,style:{"margin-right":"8px"}},{default:n(()=>[...e[1]||(e[1]=[x(" 刷新数据 ",-1)])]),_:1})):G("",!0),l(p,{type:S(P).isConnected?"success":"danger",size:"large"},{default:n(()=>[x(o(S(P).isConnected?"已连接":"未连接"),1)]),_:1},8,["type"])])]),_:1}),l(Ze,{class:"detail-main"},{default:n(()=>[S(P).isConnected?G("",!0):(I(),L("div",kt,[l(q,{title:"MQTT未连接",description:"请先在仪表板页面连接MQTT服务器以获取实时数据",type:"warning","show-icon":"",closable:!1})])),S(P).isConnected&&!B.value?(I(),L("div",Mt,[l(Y,{description:"等待OSD数据..."},{default:n(()=>[l(M,{type:"primary",onClick:ee},{default:n(()=>[...e[2]||(e[2]=[x(" 手动订阅OSD主题 ",-1)])]),_:1}),l(M,{type:"default",onClick:de,style:{"margin-left":"10px"}},{default:n(()=>[...e[3]||(e[3]=[x(" 刷新数据 ",-1)])]),_:1})]),_:1})])):G("",!0),B.value?(I(),L("div",Tt,[l(F,{gutter:8,class:"data-grid"},{default:n(()=>[l(T,{span:12},{default:n(()=>[...e[4]||(e[4]=[t("h3",{style:{"margin-bottom":"15px",color:"var(--el-text-color-primary)","border-left":"4px solid var(--el-color-primary)","padding-left":"10px"}}," 🏢 机场信息 ",-1)])]),_:1}),l(T,{span:12,style:{"text-align":"right"}},{default:n(()=>{var d,r;return[t("div",St,[e[5]||(e[5]=t("span",{style:{color:"var(--el-text-color-regular)","font-size":"14px"}},"机场序列号: ",-1)),t("span",zt,o(Ve()),1),t("div",Dt," 调试: gateway="+o((d=a.value)==null?void 0:d.gateway)+", deviceSn="+o(A.value)+", currentDevice.airport_sn="+o((r=S(oe).currentDevice)==null?void 0:r.airport_sn),1)])]}),_:1})]),_:1}),l(F,{gutter:8,class:"data-grid"},{default:n(()=>[l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Ct,[l(z,null,{default:n(()=>[l(S(ne))]),_:1}),e[6]||(e[6]=t("span",null,"机场位置",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b,w,i;return[t("div",Ft,[t("div",Ot,[e[7]||(e[7]=t("span",{class:"label"},"纬度:",-1)),t("span",jt,o(((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.latitude)==null?void 0:v.toFixed(6))||"--"),1)]),t("div",Nt,[e[8]||(e[8]=t("span",{class:"label"},"经度:",-1)),t("span",$t,o(((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.longitude)==null?void 0:g.toFixed(6))||"--"),1)]),t("div",Bt,[e[9]||(e[9]=t("span",{class:"label"},"高度:",-1)),t("span",Vt,o(((h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.height)==null?void 0:h.toFixed(2))||"--")+"m",1)]),t("div",It,[e[10]||(e[10]=t("span",{class:"label"},"航向:",-1)),t("span",Pt,o(((b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.heading)==null?void 0:b.toFixed(1))||"--")+"°",1)]),t("div",Rt,[e[11]||(e[11]=t("span",{class:"label"},"家点有效:",-1)),l(p,{type:((i=(w=a.value)==null?void 0:w.data)==null?void 0:i.home_position_is_valid)===1?"success":"warning",size:"small"},{default:n(()=>{var _,D;return[x(o(((D=(_=a.value)==null?void 0:_.data)==null?void 0:D.home_position_is_valid)===1?"有效":"无效"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Lt,[l(z,null,{default:n(()=>[l(S(ct))]),_:1}),e[12]||(e[12]=t("span",null,"环境监控",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b;return[t("div",At,[t("div",Et,[e[13]||(e[13]=t("span",{class:"label"},"环境温度:",-1)),t("span",Ut,o(((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.environment_temperature)==null?void 0:v.toFixed(1))||"--")+"°C",1)]),t("div",Qt,[e[14]||(e[14]=t("span",{class:"label"},"舱内温度:",-1)),t("span",Jt,o(((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.temperature)==null?void 0:g.toFixed(1))||"--")+"°C",1)]),t("div",qt,[e[15]||(e[15]=t("span",{class:"label"},"湿度:",-1)),t("span",Gt,o(((c=(u=a.value)==null?void 0:u.data)==null?void 0:c.humidity)||"--")+"%",1)]),t("div",Ht,[e[16]||(e[16]=t("span",{class:"label"},"风速:",-1)),t("span",Kt,o(((k=(h=a.value)==null?void 0:h.data)==null?void 0:k.wind_speed)||"--")+"m/s",1)]),t("div",Wt,[e[17]||(e[17]=t("span",{class:"label"},"降雨量:",-1)),l(p,{type:Qe((b=(y=a.value)==null?void 0:y.data)==null?void 0:b.rainfall),size:"small"},{default:n(()=>{var w,i;return[x(o(Je((i=(w=a.value)==null?void 0:w.data)==null?void 0:i.rainfall)),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Xt,[l(z,null,{default:n(()=>[l(S(se))]),_:1}),e[18]||(e[18]=t("span",null,"电源系统",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h;return[t("div",Yt,[t("div",Zt,[e[19]||(e[19]=t("span",{class:"label"},"供电电压:",-1)),t("span",es,o(((r=(d=a.value)==null?void 0:d.data)==null?void 0:r.electric_supply_voltage)||"--")+"V",1)]),t("div",ts,[e[20]||(e[20]=t("span",{class:"label"},"工作电压:",-1)),t("span",ss,o((((f=(v=a.value)==null?void 0:v.data)==null?void 0:f.working_voltage)/1e3).toFixed(2)||"--")+"V",1)]),t("div",as,[e[21]||(e[21]=t("span",{class:"label"},"工作电流:",-1)),t("span",ls,o((((g=(m=a.value)==null?void 0:m.data)==null?void 0:g.working_current)/1e3).toFixed(2)||"--")+"A",1)]),t("div",ns,[e[22]||(e[22]=t("span",{class:"label"},"ACDC功率:",-1)),t("span",os,o(((h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.acdc_power_input)==null?void 0:h.toFixed(2))||"--")+"W",1)])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",is,[l(z,null,{default:n(()=>[l(S(_t))]),_:1}),e[23]||(e[23]=t("span",null,"网络通信",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b,w,i,_,D,Z;return[t("div",ds,[t("div",rs,[e[24]||(e[24]=t("span",{class:"label"},"网络类型:",-1)),l(p,{type:je((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.network_state)==null?void 0:v.type),size:"small"},{default:n(()=>{var j,N,R;return[x(o(Ne((R=(N=(j=a.value)==null?void 0:j.data)==null?void 0:N.network_state)==null?void 0:R.type)),1)]}),_:1},8,["type"])]),t("div",us,[e[25]||(e[25]=t("span",{class:"label"},"网络质量:",-1)),t("div",cs,[l(p,{type:$e((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.network_state)==null?void 0:g.quality),size:"small"},{default:n(()=>{var j,N,R;return[x(o(Ie((R=(N=(j=a.value)==null?void 0:j.data)==null?void 0:N.network_state)==null?void 0:R.quality)),1)]}),_:1},8,["type"]),l(le,{percentage:(((h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.network_state)==null?void 0:h.quality)||0)*20,color:Be((b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.network_state)==null?void 0:b.quality),"show-text":!1,"stroke-width":4,style:{flex:"1"}},null,8,["percentage","color"])])]),t("div",_s,[e[26]||(e[26]=t("span",{class:"label"},"传输速率:",-1)),t("span",ps,o(Pe((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.network_state)==null?void 0:_.rate)),1)]),t("div",vs,[e[27]||(e[27]=t("span",{class:"label"},"空中回传:",-1)),l(p,{type:(Z=(D=a.value)==null?void 0:D.data)!=null&&Z.air_transfer_enable?"success":"info",size:"small"},{default:n(()=>{var j,N;return[x(o((N=(j=a.value)==null?void 0:j.data)!=null&&N.air_transfer_enable?"开启":"关闭"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",fs,[l(z,null,{default:n(()=>[l(S(ae))]),_:1}),e[28]||(e[28]=t("span",null,"机场状态",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k;return[t("div",ms,[t("div",gs,[e[29]||(e[29]=t("span",{class:"label"},"机场模式:",-1)),l(p,{type:_e((r=(d=a.value)==null?void 0:d.data)==null?void 0:r.mode_code),size:"small"},{default:n(()=>{var y,b;return[x(o(pe((b=(y=a.value)==null?void 0:y.data)==null?void 0:b.mode_code)),1)]}),_:1},8,["type"])]),t("div",ys,[e[30]||(e[30]=t("span",{class:"label"},"任务状态:",-1)),l(p,{type:fe((f=(v=a.value)==null?void 0:v.data)==null?void 0:f.flighttask_step_code),size:"small"},{default:n(()=>{var y,b;return[x(o(me((b=(y=a.value)==null?void 0:y.data)==null?void 0:b.flighttask_step_code)),1)]}),_:1},8,["type"])]),t("div",bs,[e[31]||(e[31]=t("span",{class:"label"},"在机库:",-1)),l(p,{type:(g=(m=a.value)==null?void 0:m.data)!=null&&g.drone_in_dock?"success":"info",size:"small"},{default:n(()=>{var y,b;return[x(o((b=(y=a.value)==null?void 0:y.data)!=null&&b.drone_in_dock?"是":"否"),1)]}),_:1},8,["type"])]),t("div",hs,[e[32]||(e[32]=t("span",{class:"label"},"静音模式:",-1)),l(p,{type:(c=(u=a.value)==null?void 0:u.data)!=null&&c.silent_mode?"warning":"success",size:"small"},{default:n(()=>{var y,b;return[x(o((b=(y=a.value)==null?void 0:y.data)!=null&&b.silent_mode?"开启":"关闭"),1)]}),_:1},8,["type"])]),t("div",ws,[e[33]||(e[33]=t("span",{class:"label"},"紧急停止:",-1)),l(p,{type:(k=(h=a.value)==null?void 0:h.data)!=null&&k.emergency_stop_state?"danger":"success",size:"small"},{default:n(()=>{var y,b;return[x(o((b=(y=a.value)==null?void 0:y.data)!=null&&b.emergency_stop_state?"激活":"正常"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",xs,[l(z,null,{default:n(()=>[l(S(pt))]),_:1}),e[34]||(e[34]=t("span",null,"存储信息",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k;return[t("div",ks,[t("div",Ms,[e[35]||(e[35]=t("span",{class:"label"},"总容量:",-1)),t("span",Ts,o(ue((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.storage)==null?void 0:v.total)),1)]),t("div",Ss,[e[36]||(e[36]=t("span",{class:"label"},"已使用:",-1)),t("span",zs,o(ue((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.storage)==null?void 0:g.used)),1)]),t("div",Ds,[e[37]||(e[37]=t("span",{class:"label"},"使用率:",-1)),l(le,{percentage:ce((c=(u=a.value)==null?void 0:u.data)==null?void 0:c.storage),color:Fe((k=(h=a.value)==null?void 0:h.data)==null?void 0:k.storage),"show-text":!0,"stroke-width":6},null,8,["percentage","color"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Cs,[l(z,null,{default:n(()=>[l(S(vt))]),_:1}),e[38]||(e[38]=t("span",null,"子设备信息",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b;return[t("div",Fs,[t("div",Os,[e[39]||(e[39]=t("span",{class:"label"},"飞机序列号:",-1)),t("span",js,o(((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.sub_device)==null?void 0:v.device_sn)||"--"),1)]),t("div",Ns,[e[40]||(e[40]=t("span",{class:"label"},"设备型号:",-1)),t("span",$s,o(((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.sub_device)==null?void 0:g.device_model_key)||"--"),1)]),t("div",Bs,[e[41]||(e[41]=t("span",{class:"label"},"在线状态:",-1)),l(p,{type:(h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.sub_device)!=null&&h.device_online_status?"success":"danger",size:"small"},{default:n(()=>{var w,i,_;return[x(o((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.sub_device)!=null&&_.device_online_status?"在线":"离线"),1)]}),_:1},8,["type"])]),t("div",Vs,[e[42]||(e[42]=t("span",{class:"label"},"配对状态:",-1)),l(p,{type:(b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.sub_device)!=null&&b.device_paired?"success":"warning",size:"small"},{default:n(()=>{var w,i,_;return[x(o((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.sub_device)!=null&&_.device_paired?"已配对":"未配对"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Is,[l(z,null,{default:n(()=>[l(S(ne))]),_:1}),e[43]||(e[43]=t("span",null,"位置状态",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b;return[t("div",Ps,[t("div",Rs,[e[44]||(e[44]=t("span",{class:"label"},"校准状态:",-1)),l(p,{type:(v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.position_state)!=null&&v.is_calibration?"warning":"success",size:"small"},{default:n(()=>{var w,i,_;return[x(o((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.position_state)!=null&&_.is_calibration?"校准中":"已校准"),1)]}),_:1},8,["type"])]),t("div",Ls,[e[45]||(e[45]=t("span",{class:"label"},"定位状态:",-1)),l(p,{type:Re((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.position_state)==null?void 0:g.is_fixed),size:"small"},{default:n(()=>{var w,i,_;return[x(o(Le((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.position_state)==null?void 0:_.is_fixed)),1)]}),_:1},8,["type"])]),t("div",As,[e[46]||(e[46]=t("span",{class:"label"},"GPS卫星数:",-1)),t("span",Es,o(((h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.position_state)==null?void 0:h.gps_number)||"--"),1)]),t("div",Us,[e[47]||(e[47]=t("span",{class:"label"},"RTK卫星数:",-1)),t("span",Qs,o(((b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.position_state)==null?void 0:b.rtk_number)||"--"),1)])])]}),_:1})]),_:1})]),_:1}),l(F,{gutter:8,class:"data-grid",style:{"margin-top":"30px"}},{default:n(()=>[l(T,{span:12},{default:n(()=>[...e[48]||(e[48]=[t("h3",{style:{"margin-bottom":"15px",color:"var(--el-text-color-primary)","border-left":"4px solid var(--el-color-success)","padding-left":"10px"}}," ✈️ 飞机信息 ",-1)])]),_:1})]),_:1}),l(F,{gutter:8,class:"data-grid",style:{"margin-top":"15px"}},{default:n(()=>[l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Js,[l(z,null,{default:n(()=>[l(S(ne))]),_:1}),e[49]||(e[49]=t("span",null,"备降点信息",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b,w,i,_,D,Z,j;return[t("div",qs,[t("div",Gs,[e[50]||(e[50]=t("span",{class:"label"},"备降点纬度:",-1)),t("span",Hs,o(((f=(v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.alternate_land_point)==null?void 0:v.latitude)==null?void 0:f.toFixed(6))||"--"),1)]),t("div",Ks,[e[51]||(e[51]=t("span",{class:"label"},"备降点经度:",-1)),t("span",Ws,o(((c=(u=(g=(m=a.value)==null?void 0:m.data)==null?void 0:g.alternate_land_point)==null?void 0:u.longitude)==null?void 0:c.toFixed(6))||"--"),1)]),t("div",Xs,[e[52]||(e[52]=t("span",{class:"label"},"备降点高度:",-1)),t("span",Ys,o(((b=(y=(k=(h=a.value)==null?void 0:h.data)==null?void 0:k.alternate_land_point)==null?void 0:y.height)==null?void 0:b.toFixed(2))||"--")+"m",1)]),t("div",Zs,[e[53]||(e[53]=t("span",{class:"label"},"安全降落高度:",-1)),t("span",ea,o(((_=(i=(w=a.value)==null?void 0:w.data)==null?void 0:i.alternate_land_point)==null?void 0:_.safe_land_height)||"--")+"m",1)]),t("div",ta,[e[54]||(e[54]=t("span",{class:"label"},"配置状态:",-1)),l(p,{type:(j=(Z=(D=a.value)==null?void 0:D.data)==null?void 0:Z.alternate_land_point)!=null&&j.is_configured?"success":"warning",size:"small"},{default:n(()=>{var N,R,ge;return[x(o((ge=(R=(N=a.value)==null?void 0:N.data)==null?void 0:R.alternate_land_point)!=null&&ge.is_configured?"已配置":"未配置"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",sa,[l(z,null,{default:n(()=>[l(S(ae))]),_:1}),e[55]||(e[55]=t("span",null,"工作状态",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b;return[t("div",aa,[t("div",la,[e[56]||(e[56]=t("span",{class:"label"},"任务编号:",-1)),t("span",na,o(((r=(d=a.value)==null?void 0:d.data)==null?void 0:r.job_number)||"--"),1)]),t("div",oa,[e[57]||(e[57]=t("span",{class:"label"},"累计时间:",-1)),t("span",ia,o(We((f=(v=a.value)==null?void 0:v.data)==null?void 0:f.acc_time)),1)]),t("div",da,[e[58]||(e[58]=t("span",{class:"label"},"激活时间:",-1)),t("span",ra,o(Xe((g=(m=a.value)==null?void 0:m.data)==null?void 0:g.activation_time)),1)]),t("div",ua,[e[59]||(e[59]=t("span",{class:"label"},"部署模式:",-1)),l(p,{type:(c=(u=a.value)==null?void 0:u.data)!=null&&c.deployment_mode?"success":"info",size:"small"},{default:n(()=>{var w,i;return[x(o((i=(w=a.value)==null?void 0:w.data)!=null&&i.deployment_mode?"已部署":"未部署"),1)]}),_:1},8,["type"])]),t("div",ca,[e[60]||(e[60]=t("span",{class:"label"},"任务状态:",-1)),l(p,{type:fe((k=(h=a.value)==null?void 0:h.data)==null?void 0:k.flighttask_step_code),size:"small"},{default:n(()=>{var w,i;return[x(o(me((i=(w=a.value)==null?void 0:w.data)==null?void 0:i.flighttask_step_code)),1)]}),_:1},8,["type"])]),t("div",_a,[e[61]||(e[61]=t("span",{class:"label"},"机场状态:",-1)),l(p,{type:_e((b=(y=a.value)==null?void 0:y.data)==null?void 0:b.mode_code),size:"small"},{default:n(()=>{var w,i;return[x(o(pe((i=(w=a.value)==null?void 0:w.data)==null?void 0:i.mode_code)),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",pa,[l(z,null,{default:n(()=>[l(S(se))]),_:1}),e[62]||(e[62]=t("span",null,"电力供应",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h;return[t("div",va,[t("div",fa,[e[63]||(e[63]=t("span",{class:"label"},"供电电压:",-1)),t("span",ma,o(((r=(d=a.value)==null?void 0:d.data)==null?void 0:r.electric_supply_voltage)||"--")+"V",1)]),t("div",ga,[e[64]||(e[64]=t("span",{class:"label"},"工作电压:",-1)),t("span",ya,o((((f=(v=a.value)==null?void 0:v.data)==null?void 0:f.working_voltage)/1e3).toFixed(2)||"--")+"V",1)]),t("div",ba,[e[65]||(e[65]=t("span",{class:"label"},"工作电流:",-1)),t("span",ha,o((((g=(m=a.value)==null?void 0:m.data)==null?void 0:g.working_current)/1e3).toFixed(2)||"--")+"A",1)]),t("div",wa,[e[66]||(e[66]=t("span",{class:"label"},"ACDC功率:",-1)),t("span",xa,o(((h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.acdc_power_input)==null?void 0:h.toFixed(2))||"--")+"W",1)])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",ka,[l(z,null,{default:n(()=>[l(S(se))]),_:1}),e[67]||(e[67]=t("span",null,"备用电池",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h;return[t("div",Ma,[t("div",Ta,[e[68]||(e[68]=t("span",{class:"label"},"电压:",-1)),t("span",Sa,o((((v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.backup_battery)==null?void 0:v.voltage)/1e3).toFixed(2)||"--")+"V",1)]),t("div",za,[e[69]||(e[69]=t("span",{class:"label"},"温度:",-1)),t("span",Da,o(((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.backup_battery)==null?void 0:g.temperature)||"--")+"°C",1)]),t("div",Ca,[e[70]||(e[70]=t("span",{class:"label"},"开关状态:",-1)),l(p,{type:(h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.backup_battery)!=null&&h.switch?"success":"info",size:"small"},{default:n(()=>{var k,y,b;return[x(o((b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.backup_battery)!=null&&b.switch?"开启":"关闭"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Fa,[l(z,null,{default:n(()=>[l(S(ae))]),_:1}),e[71]||(e[71]=t("span",null,"云台和POE",-1))])]),default:n(()=>{var d,r,v,f,m,g;return[t("div",Oa,[t("div",ja,[e[72]||(e[72]=t("span",{class:"label"},"云台支架状态:",-1)),l(p,{type:(r=(d=a.value)==null?void 0:d.data)!=null&&r.gimbal_holder_state?"warning":"success",size:"small"},{default:n(()=>{var u,c;return[x(o((c=(u=a.value)==null?void 0:u.data)!=null&&c.gimbal_holder_state?"异常":"正常"),1)]}),_:1},8,["type"])]),t("div",Na,[e[73]||(e[73]=t("span",{class:"label"},"POE链路状态:",-1)),l(p,{type:(f=(v=a.value)==null?void 0:v.data)!=null&&f.poe_link_status?"success":"danger",size:"small"},{default:n(()=>{var u,c;return[x(o((c=(u=a.value)==null?void 0:u.data)!=null&&c.poe_link_status?"已连接":"未连接"),1)]}),_:1},8,["type"])]),t("div",$a,[e[74]||(e[74]=t("span",{class:"label"},"POE功率输出:",-1)),t("span",Ba,o(((g=(m=a.value)==null?void 0:m.data)==null?void 0:g.poe_power_output)||"--")+"W",1)])])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Va,[l(z,null,{default:n(()=>[l(S(se))]),_:1}),e[75]||(e[75]=t("span",null,"电池维护",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b,w;return[t("div",Ia,[t("div",Pa,[e[76]||(e[76]=t("span",{class:"label"},"维护状态:",-1)),l(p,{type:(v=(r=(d=a.value)==null?void 0:d.data)==null?void 0:r.drone_battery_maintenance_info)!=null&&v.maintenance_state?"warning":"success",size:"small"},{default:n(()=>{var i,_,D;return[x(o((D=(_=(i=a.value)==null?void 0:i.data)==null?void 0:_.drone_battery_maintenance_info)!=null&&D.maintenance_state?"维护中":"正常"),1)]}),_:1},8,["type"])]),t("div",Ra,[e[77]||(e[77]=t("span",{class:"label"},"剩余维护时间:",-1)),t("span",La,o(((g=(m=(f=a.value)==null?void 0:f.data)==null?void 0:m.drone_battery_maintenance_info)==null?void 0:g.maintenance_time_left)||"--")+"s",1)]),t("div",Aa,[e[78]||(e[78]=t("span",{class:"label"},"加热状态:",-1)),l(p,{type:(h=(c=(u=a.value)==null?void 0:u.data)==null?void 0:c.drone_battery_maintenance_info)!=null&&h.heat_state?"warning":"info",size:"small"},{default:n(()=>{var i,_,D;return[x(o((D=(_=(i=a.value)==null?void 0:i.data)==null?void 0:_.drone_battery_maintenance_info)!=null&&D.heat_state?"加热中":"正常"),1)]}),_:1},8,["type"])]),(w=(b=(y=(k=a.value)==null?void 0:k.data)==null?void 0:y.drone_battery_maintenance_info)==null?void 0:b.batteries)!=null&&w.length?(I(),L("div",Ea,[e[81]||(e[81]=t("div",{style:{"margin-bottom":"6px",color:"var(--el-text-color-primary)","font-size":"12px","font-weight":"500"}},"电池详情",-1)),(I(!0),L(ft,null,mt(a.value.data.drone_battery_maintenance_info.batteries,(i,_)=>(I(),L("div",{key:_,class:"battery-info"},[t("div",Ua,[t("span",Qa,o(Ae(i.index))+":",1),l(le,{percentage:ve(i.capacity_percent),color:Oe(ve(i.capacity_percent)),"show-text":!0,"stroke-width":4},null,8,["percentage","color"])]),t("div",Ja,[e[79]||(e[79]=t("span",{class:"label"},"电压:",-1)),t("span",qa,o(Ee(i.voltage)),1)]),t("div",Ga,[e[80]||(e[80]=t("span",{class:"label"},"温度:",-1)),t("span",Ha,o(Ue(i.temperature)),1)])]))),128))])):G("",!0)])]}),_:1})]),_:1}),l(T,{span:3},{default:n(()=>[l(C,{class:"info-card",shadow:"hover"},{header:n(()=>[t("div",Ka,[l(z,null,{default:n(()=>[l(S(ae))]),_:1}),e[82]||(e[82]=t("span",null,"其他状态",-1))])]),default:n(()=>{var d,r,v,f,m,g,u,c,h,k,y,b,w;return[t("div",Wa,[t("div",Xa,[e[83]||(e[83]=t("span",{class:"label"},"机盖状态:",-1)),l(p,{type:(r=(d=a.value)==null?void 0:d.data)!=null&&r.cover_state?"warning":"success",size:"small"},{default:n(()=>{var i,_;return[x(o((_=(i=a.value)==null?void 0:i.data)!=null&&_.cover_state?"开启":"关闭"),1)]}),_:1},8,["type"])]),t("div",Ya,[e[84]||(e[84]=t("span",{class:"label"},"补光灯:",-1)),l(p,{type:(f=(v=a.value)==null?void 0:v.data)!=null&&f.supplement_light_state?"success":"info",size:"small"},{default:n(()=>{var i,_;return[x(o((_=(i=a.value)==null?void 0:i.data)!=null&&_.supplement_light_state?"开启":"关闭"),1)]}),_:1},8,["type"])]),t("div",Za,[e[85]||(e[85]=t("span",{class:"label"},"空调状态:",-1)),l(p,{type:(u=(g=(m=a.value)==null?void 0:m.data)==null?void 0:g.air_conditioner)!=null&&u.air_conditioner_state?"success":"info",size:"small"},{default:n(()=>{var i,_,D;return[x(o((D=(_=(i=a.value)==null?void 0:i.data)==null?void 0:_.air_conditioner)!=null&&D.air_conditioner_state?"开启":"关闭"),1)]}),_:1},8,["type"])]),t("div",el,[e[86]||(e[86]=t("span",{class:"label"},"告警状态:",-1)),l(p,{type:(h=(c=a.value)==null?void 0:c.data)!=null&&h.alarm_state?"danger":"success",size:"small"},{default:n(()=>{var i,_;return[x(o((_=(i=a.value)==null?void 0:i.data)!=null&&_.alarm_state?"告警":"正常"),1)]}),_:1},8,["type"])]),t("div",tl,[e[87]||(e[87]=t("span",{class:"label"},"用户体验改善:",-1)),l(p,{type:qe((y=(k=a.value)==null?void 0:k.data)==null?void 0:y.user_experience_improvement),size:"small"},{default:n(()=>{var i,_;return[x(o(Ge((_=(i=a.value)==null?void 0:i.data)==null?void 0:_.user_experience_improvement)),1)]}),_:1},8,["type"])]),t("div",sl,[e[88]||(e[88]=t("span",{class:"label"},"固件一致性:",-1)),l(p,{type:(w=(b=a.value)==null?void 0:b.data)!=null&&w.compatible_status?"warning":"success",size:"small"},{default:n(()=>{var i,_;return[x(o((_=(i=a.value)==null?void 0:i.data)!=null&&_.compatible_status?"需要升级":"正常"),1)]}),_:1},8,["type"])])])]}),_:1})]),_:1})]),_:1}),l(C,{class:"raw-data-card",shadow:"hover",style:{"margin-top":"15px"}},{header:n(()=>[t("div",al,[l(z,null,{default:n(()=>[l(S(gt))]),_:1}),e[89]||(e[89]=t("span",null,"原始OSD数据",-1)),l(M,{type:"primary",size:"small",onClick:Ye,icon:H.value?"Check":"CopyDocument",class:yt({"copy-success":H.value}),style:{"margin-left":"auto"}},{default:n(()=>[x(o(H.value?"已复制":"复制"),1)]),_:1},8,["icon","class"])])]),default:n(()=>[t("div",ll,[t("pre",{class:"json-content",innerHTML:He(a.value)},null,8,nl)])]),_:1})])):G("",!0)]),_:1})]),_:1})])}}},ul=tt(il,[["__scopeId","data-v-370467ce"]]);export{ul as default};
